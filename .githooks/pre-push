#!/bin/bash

echo "ğŸ” Ejecutando verificaciones pre-push..."

# Ejecutar tests
echo "ğŸ§ª Ejecutando tests..."
go test ./... -v
if [ $? -ne 0 ]; then
    echo "âŒ Los tests han fallado. Por favor, corrige los errores antes de hacer push."
    exit 1
fi

# Ejecutar linter
echo "ğŸ”§ Ejecutando linter..."
golangci-lint run
if [ $? -ne 0 ]; then
    echo "âŒ El linter ha encontrado errores. Por favor, corrige los errores antes de hacer push."
    exit 1
fi

# Verificar formato del cÃ³digo
echo "ğŸ“ Verificando formato del cÃ³digo..."
go fmt ./...
if [ $? -ne 0 ]; then
    echo "âŒ Hay problemas con el formato del cÃ³digo. Por favor, corrige los errores antes de hacer push."
    exit 1
fi

echo "âœ… Todas las verificaciones han pasado correctamente!"
exit 0 